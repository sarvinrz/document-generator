# راهنمای عیب‌یابی

این بخش شامل راه‌حل‌های مشکلات رایج و روش‌های عیب‌یابی سیستم پشتیبانی است.

## قبل از شروع

قبل از شروع عیب‌یابی، مطمئن شوید:

1. **نسخه سیستم** را بررسی کنید
2. **لاگ‌های سیستم** را بررسی کنید
3. **وضعیت سرویس‌ها** را چک کنید
4. **اتصال اینترنت** را تست کنید

## بررسی وضعیت سیستم

### 1. بررسی نسخه

```bash
npm run version
```

### 2. بررسی وضعیت سرویس‌ها

```bash
npm run status
```

### 3. بررسی لاگ‌ها

```bash
# لاگ‌های اخیر
tail -f logs/app.log

# لاگ‌های خطا
grep "ERROR" logs/app.log

# لاگ‌های امروز
grep "$(date +%Y-%m-%d)" logs/app.log
```

## مشکلات رایج

### 🔐 مشکلات احراز هویت

#### مشکل: "Token نامعتبر"
**علت:** JWT Token منقضی شده یا نامعتبر است

**راه‌حل:**
1. دوباره وارد سیستم شوید
2. Token جدید دریافت کنید
3. تنظیمات JWT را بررسی کنید

#### مشکل: "دسترسی غیرمجاز"
**علت:** کاربر دسترسی لازم را ندارد

**راه‌حل:**
1. نقش کاربر را بررسی کنید
2. مجوزهای لازم را اضافه کنید
3. با مدیر سیستم تماس بگیرید

### 🗄️ مشکلات دیتابیس

#### مشکل: "اتصال به دیتابیس برقرار نیست"
**علت:** دیتابیس در حال اجرا نیست یا تنظیمات اشتباه است

**راه‌حل:**
```bash
# بررسی وضعیت PostgreSQL
sudo systemctl status postgresql

# راه‌اندازی دیتابیس
sudo systemctl start postgresql

# تست اتصال
psql -h localhost -U postgres -d support_db
```

#### مشکل: "جدول یافت نشد"
**علت:** Migration ها اجرا نشده‌اند

**راه‌حل:**
```bash
# اجرای Migration ها
npm run db:migrate

# بررسی وضعیت Migration ها
npm run db:migrate:status
```

### 📧 مشکلات ایمیل

#### مشکل: "ارسال ایمیل ناموفق"
**علت:** تنظیمات SMTP اشتباه است

**راه‌حل:**
1. تنظیمات SMTP را بررسی کنید
2. رمز عبور ایمیل را بررسی کنید
3. فایروال را چک کنید

```bash
# تست اتصال SMTP
telnet smtp.gmail.com 587
```

### 🚀 مشکلات عملکرد

#### مشکل: "سیستم کند است"
**علت:** منابع سیستم کم است یا کوئری‌های ناکارآمد

**راه‌حل:**
1. منابع سیستم را بررسی کنید
2. کوئری‌های دیتابیس را بهینه کنید
3. کش را فعال کنید

```bash
# بررسی استفاده از CPU و RAM
htop

# بررسی استفاده از دیسک
df -h

# بررسی کوئری‌های کند
npm run db:slow-queries
```

## ابزارهای عیب‌یابی

### 1. لاگ‌ها

```bash
# مشاهده لاگ‌های زنده
npm run logs:watch

# فیلتر کردن لاگ‌ها
npm run logs:filter ERROR

# پاک کردن لاگ‌های قدیمی
npm run logs:clean
```

### 2. مانیتورینگ

```bash
# وضعیت سیستم
npm run monitor:status

# آمار استفاده
npm run monitor:stats

# گزارش عملکرد
npm run monitor:report
```

### 3. تست‌ها

```bash
# اجرای تمام تست‌ها
npm test

# تست‌های واحد
npm run test:unit

# تست‌های یکپارچگی
npm run test:integration

# تست‌های عملکرد
npm run test:performance
```

## بازیابی سیستم

### 1. پشتیبان‌گیری

```bash
# پشتیبان‌گیری از دیتابیس
npm run backup:db

# پشتیبان‌گیری از فایل‌ها
npm run backup:files

# پشتیبان‌گیری کامل
npm run backup:full
```

### 2. بازیابی

```bash
# بازیابی دیتابیس
npm run restore:db backup-2024-01-01.sql

# بازیابی فایل‌ها
npm run restore:files backup-2024-01-01.tar.gz

# بازیابی کامل
npm run restore:full backup-2024-01-01
```

### 3. بازنشانی

```bash
# بازنشانی به تنظیمات پیش‌فرض
npm run reset:config

# بازنشانی کامل سیستم
npm run reset:full
```

## تماس با پشتیبانی

اگر مشکل شما حل نشد:

1. **اطلاعات سیستم** را جمع‌آوری کنید:
   ```bash
   npm run support:info
   ```

2. **لاگ‌های مربوطه** را ارسال کنید

3. **مراحل تولید مشکل** را توضیح دهید

4. **عکس‌ها یا ویدیو** از مشکل ارسال کنید

### اطلاعات تماس

- 📧 **ایمیل**: support@example.com
- 💬 **چت آنلاین**: [شروع چت](https://chat.example.com)
- 📞 **تلفن**: 021-12345678
- 🕒 **ساعات کاری**: شنبه تا پنج‌شنبه، 9 تا 17

## منابع مفید

- [مستندات API](/docs/api/intro)
- [راهنمای نصب](/docs/getting-started/installation)
- [پیکربندی سیستم](/docs/getting-started/configuration)
- [بلاگ تکنیکی](/blog)

---

*آخرین به‌روزرسانی: ${new Date().toLocaleDateString('fa-IR')}*
